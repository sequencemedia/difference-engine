"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.charAt=charAt;exports.charFromEntityCode=charFromEntityCode;exports.charFromEntityName=charFromEntityName;exports.charOf=charOf;exports.codePointAt=codePointAt;exports.codePointOf=codePointOf;exports.default=void 0;exports.entityAt=entityAt;exports.entityCodeAt=entityCodeAt;exports.entityCodeFromChar=entityCodeFromChar;exports.entityCodeOf=entityCodeOf;exports.entityNameAt=entityNameAt;exports.entityNameFromChar=entityNameFromChar;exports.entityNameOf=entityNameOf;exports.entityOf=entityOf;exports.fromCodePoint=fromCodePoint;exports.fromDecToHex=fromDecToHex;exports.fromDecToOct=fromDecToOct;exports.reverse=reverse;exports.toEntityCode=toEntityCode;exports.toEntityName=toEntityName;var _common=require("../common");var _string=require("../common/string");function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}const OCT=8;const DEC=10;const HEX=16;const X=/\u0026[\w]+\u003b|\u0026\u0023(?:[1-9]+[\d]+|[1-9])\u003b+/g;const XCODE=/\u0026\u0023(?:[1-9]+[\d]+|[1-9]+)\u003b+/g;const XNAME=/\u0026[\w]+\u003b+/g;const ACHAR='&';const ACHARCODE=38;const AENTITYNAME='&amp;';const AENTITYCODE='&#38;';function charAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){let v=s.charAt(i);if(v===ACHAR){X.lastIndex=i;const m=X.exec(s);if(m===null){return ACHAR;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c;if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c;return ACHAR;}}else{return v;}}return null;}function codePointAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){let v=s.codePointAt(i);if(v===ACHARCODE){X.lastIndex=i;const m=X.exec(s);if(m===null){return ACHARCODE;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c.codePointAt(0);if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c.codePointAt(0);return ACHARCODE;}}else{return v;}}return null;}function charOf(s){if((0,_common.isString)(s)){if(s.length<4){return s.charAt(0);}else{let v=s.charAt(0);if(v===ACHAR){X.lastIndex=0;const m=X.exec(s);if(m===null){return ACHAR;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c;if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c;return ACHAR;}}else{return v;}}}return null;}function codePointOf(s){if((0,_common.isString)(s)){if(s.length<4){return s.codePointAt(0);}else{let v=s.codePointAt(0);if(v===ACHARCODE){X.lastIndex=0;const m=X.exec(s);if(m===null){return ACHARCODE;}else{v=m.shift();let c;if((c=(0,_string.getCharFromEntityName)(v))!==null)return c.codePointAt(0);if((c=(0,_string.getCharFromEntityCode)(v))!==null)return c.codePointAt(0);return ACHARCODE;}}else{return v;}}}return null;}function entityAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){const v=s.charAt(i);if(v===ACHAR){X.lastIndex=i;const m=X.exec(s);return m===null?AENTITYNAME:m.shift();}else{let c;if((c=(0,_string.getEntityNameFromChar)(v))!==null)return c;if((c=(0,_string.getEntityCodeFromChar)(v))!==null)return c;return v;}}return null;}function entityCodeAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){const v=s.charAt(i);if(v===ACHAR){XCODE.lastIndex=i;const m=XCODE.exec(s);return m===null?AENTITYCODE:m.shift();}else{let c;if((c=(0,_string.getEntityCodeFromChar)(v))!==null)return c;return v;}}return null;}function entityNameAt(s,i){if((0,_common.isString)(s)&&(0,_common.isNumber)(i)){const v=s.charAt(i);if(v===ACHAR){XNAME.lastIndex=i;const m=XNAME.exec(s);return m===null?AENTITYNAME:m.shift();}else{let c;if((c=(0,_string.getEntityNameFromChar)(v))!==null)return c;return v;}}return null;}function entityOf(s){if((0,_common.isString)(s)){const v=s.charAt(0);if(v===ACHAR){X.lastIndex=0;const m=X.exec(s);return m===null?AENTITYNAME:m.shift();}else{let c;if((c=(0,_string.getEntityNameFromChar)(v))!==null)return c;if((c=(0,_string.getEntityCodeFromChar)(v))!==null)return c;return v;}}return null;}function fromCodePoint(i){return(0,_common.isNumber)(i)?(0,_string.getFromCodePoint)(i):null;}function charFromEntityCode(s){return(0,_common.isString)(s)?(0,_string.getCharFromEntityCode)(s):null;}function charFromEntityName(s){return(0,_common.isString)(s)?(0,_string.getCharFromEntityName)(s):null;}function toEntityCode(s){if((0,_common.isString)(s)){let i=0;const j=s.length;let c,h;let r='';for(i,j;i<j;i=i+1){c=s.charAt(i);h=(0,_string.getEntityCodeFromChar)(c);r=r+(h===null?c:h);}return r;}return null;}function toEntityName(s){if((0,_common.isString)(s)){let i=0;const j=s.length;let c,h;let r='';for(i,j;i<j;i=i+1){c=s.charAt(i);h=(0,_string.getEntityNameFromChar)(c);r=r+(h===null?c:h);}return r;}return null;}function entityCodeFromChar(s){return(0,_common.isString)(s)&&s.length===1?(0,_string.getEntityCodeFromChar)(s):null;}function entityNameFromChar(s){return(0,_common.isString)(s)&&s.length===1?_string.entityNameFromCharMap.has(s)?_string.entityNameFromCharMap.get(s):s:null;}function entityCodeOf(s){return(0,_common.isString)(s)&&s.length===1?(0,_string.getEntityCodeFromChar)(s):null;}function entityNameOf(s){return(0,_common.isString)(s)&&s.length===1?_string.entityNameFromCharMap.has(s)?_string.entityNameFromCharMap.get(s):s:null;}function fromDecToHex(v){return(0,_common.isNumber)(v)?v.toString(HEX):(0,_common.isString)(v)?isNaN(v=parseInt(v,DEC))?null:v.toString(HEX):null;}function fromDecToOct(v){return(0,_common.isNumber)(v)?v.toString(OCT):(0,_common.isString)(v)?isNaN(v=parseInt(v,DEC))?null:v.toString(OCT):null;}function reverse(string){if((0,_common.isString)(string)){let s='';let i=string.length;do{s=s+string.charAt(--i);}while(i>0);return s;}return null;}class StringEngine{}exports.default=StringEngine;_defineProperty(StringEngine,"charAt",charAt);_defineProperty(StringEngine,"codePointAt",codePointAt);_defineProperty(StringEngine,"charOf",charOf);_defineProperty(StringEngine,"codePointOf",codePointOf);_defineProperty(StringEngine,"entityAt",entityAt);_defineProperty(StringEngine,"entityCodeAt",entityCodeAt);_defineProperty(StringEngine,"entityNameAt",entityNameAt);_defineProperty(StringEngine,"entityOf",entityOf);_defineProperty(StringEngine,"fromCodePoint",fromCodePoint);_defineProperty(StringEngine,"charFromEntityCode",charFromEntityCode);_defineProperty(StringEngine,"charFromEntityName",charFromEntityName);_defineProperty(StringEngine,"toEntityCode",toEntityCode);_defineProperty(StringEngine,"toEntityName",toEntityName);_defineProperty(StringEngine,"entityCodeFromChar",entityCodeFromChar);_defineProperty(StringEngine,"entityNameFromChar",entityNameFromChar);_defineProperty(StringEngine,"entityCodeOf",entityCodeOf);_defineProperty(StringEngine,"entityNameOf",entityNameOf);_defineProperty(StringEngine,"fromDecToHex",fromDecToHex);_defineProperty(StringEngine,"fromDecToOct",fromDecToOct);_defineProperty(StringEngine,"reverse",reverse);